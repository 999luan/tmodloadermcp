name: Setup GitHub Pages

on:
  push:
    branches: [ main ]

jobs:
  setup-pages:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Build project
      run: npm run build
      
    - name: Create public directory
      run: |
        mkdir -p public
        cp -r dist/* public/ 2>/dev/null || true
        cp api/* public/ 2>/dev/null || true
        
    - name: Create index.html if not exists
      run: |
        if [ ! -f public/index.html ]; then
          echo '<!DOCTYPE html>
          <html>
          <head>
            <title>TModLoader MCP Server</title>
            <meta charset="UTF-8">
            <style>
              body { font-family: Arial, sans-serif; margin: 40px; }
              .container { max-width: 800px; margin: 0 auto; }
              .status { background: #e8f5e8; padding: 20px; border-radius: 5px; }
              .api-section { margin: 20px 0; }
              .method { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
            </style>
          </head>
          <body>
            <div class="container">
              <h1>ğŸš€ TModLoader MCP Server</h1>
              <div class="status">
                <h2>âœ… Servidor Online</h2>
                <p>MCP Server para desenvolvimento de mods TModLoader</p>
                <p><strong>VersÃ£o:</strong> 1.0.0</p>
              </div>
              <div class="api-section">
                <h2>ğŸ”§ MÃ©todos DisponÃ­veis</h2>
                <div class="method">
                  <h3>ğŸ“š get_tmodloader_documentation</h3>
                  <p>Obter documentaÃ§Ã£o e referÃªncias da API do TModLoader</p>
                </div>
                <div class="method">
                  <h3>ğŸ“– get_tutorial_guide</h3>
                  <p>Guias passo a passo para desenvolvimento de mods</p>
                </div>
                <div class="method">
                  <h3>ğŸ¥ get_youtube_tutorials</h3>
                  <p>Buscar tutoriais do TModLoader no YouTube</p>
                </div>
                <div class="method">
                  <h3>â­ get_best_practices</h3>
                  <p>Melhores prÃ¡ticas e diretrizes para desenvolvimento</p>
                </div>
                <div class="method">
                  <h3>ğŸ—ï¸ create_mod_structure</h3>
                  <p>Gerar estrutura completa de projeto de mod</p>
                </div>
                <div class="method">
                  <h3>ğŸ” analyze_mod_code</h3>
                  <p>Analisar cÃ³digo de mod existente e sugerir melhorias</p>
                </div>
                <div class="method">
                  <h3>âš™ï¸ generate_mod_code</h3>
                  <p>Gerar cÃ³digo de mod baseado em parÃ¢metros</p>
                </div>
                <div class="method">
                  <h3>ğŸ“° get_latest_tmodloader_info</h3>
                  <p>InformaÃ§Ãµes mais recentes sobre o TModLoader</p>
                </div>
                <div class="method">
                  <h3>ğŸ‘¥ get_community_patterns</h3>
                  <p>PadrÃµes da comunidade e melhores prÃ¡ticas</p>
                </div>
                <div class="method">
                  <h3>ğŸ”„ get_latest_api_changes</h3>
                  <p>MudanÃ§as mais recentes na API do TModLoader</p>
                </div>
                <div class="method">
                  <h3>ğŸ“Š get_popular_mods_analysis</h3>
                  <p>AnÃ¡lise de mods populares e seus padrÃµes</p>
                </div>
              </div>
            </div>
          </body>
          </html>' > public/index.html
        fi
        
    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./public
        force_orphan: true 